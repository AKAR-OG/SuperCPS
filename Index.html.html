<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Super CPS Tester ‚Äî Dark Orange Edition</title>
<style>
  :root{
    --bg:#080812;--card:#0e1116;--muted:#9aa6b2;--accent:#ff8a00;
    --accent-2:#ffb86b;--glass:rgba(255,255,255,0.03);--success:#22c55e;
    --danger:#ef4444;--max-width:1100px;
  }
  *{box-sizing:border-box;}
  html,body{height:100%;margin:0;font-family:Inter,Ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;color:#eaf2ff;background:linear-gradient(180deg,#05060a 0%, #0a0f17 100%)}
  .container{max-width:var(--max-width);margin:28px auto;padding:18px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  h1{margin:0;font-size:20px;letter-spacing:0.4px;color:var(--accent)}
  .subtitle{color:var(--muted);font-size:13px}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:18px;margin-top:16px;box-shadow:0 8px 40px rgba(2,6,15,0.6)}
  .modes{display:flex;gap:8px;flex-wrap:wrap}
  .mode-btn{background:var(--glass);border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:10px;cursor:pointer;color:var(--muted);font-weight:600}
  .mode-btn.active{background:linear-gradient(90deg,#4c1d95,var(--accent));color:white;border:0}
  .grid{display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:16px}
  .click-area{
    background:linear-gradient(180deg,#071022,#0b1728);
    border-radius:12px;padding:18px;
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    position:relative;min-height:320px;overflow:visible;
  }
  .big-target{
    width:100%;height:220px;border-radius:12px;border:4px dashed rgba(255,255,255,0.04);
    display:flex;align-items:center;justify-content:center;
    background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
    font-size:26px;color:var(--accent);user-select:none;
    position:relative;z-index:1;text-align:center;
    word-break:break-word;line-height:1.4;
  }
  .ripple{position:absolute;width:20px;height:20px;background:rgba(255,138,0,0.4);border-radius:50%;transform:translate(-50%,-50%) scale(0);pointer-events:none;animation:rippleAnim 0.5s ease-out;}
  @keyframes rippleAnim{to{transform:translate(-50%,-50%) scale(4);opacity:0;}}
  .stat-row{display:flex;gap:10px;margin-top:12px;align-items:center;width:100%}
  .stat{flex:1;background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;text-align:center}
  .stat .num{font-size:20px;font-weight:800}
  .stat .label{color:var(--muted);font-size:12px}
  .side{display:flex;flex-direction:column;gap:10px}
  .panel{background:rgba(255,255,255,0.02);border-radius:10px;padding:12px}
  .panel h3{margin:0 0 8px 0}
  .controls{display:flex;gap:8px;flex-wrap:wrap}
  .btn{padding:8px 12px;border-radius:10px;border:0;cursor:pointer}
  .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#071022;font-weight:700}
  .btn.ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.04)}
  .result-popup{
    position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(0.8);
    background:linear-gradient(180deg,#0a0d10,#121417);border-radius:14px;padding:22px;
    text-align:center;color:#fff;opacity:0;visibility:hidden;width:50%;max-width:420px;
    border:3px solid rgba(255,138,0,0.12);box-shadow:0 18px 60px rgba(0,0,0,0.7);backdrop-filter: blur(6px);
    z-index:10;
  }
  .result-popup.show{opacity:1;visibility:visible;transform:translate(-50%,-50%) scale(1);transition:all .35s cubic-bezier(.2,.9,.3,1)}
  .result-rank{display:flex;align-items:center;gap:12px;justify-content:center}
  .rank-icon{width:64px;height:64px;border-radius:10px;background:linear-gradient(90deg,rgba(255,138,0,0.14),rgba(255,200,120,0.06));display:flex;align-items:center;justify-content:center;font-size:34px}
  .rank-info{line-height:1}
  .rank-name{font-size:20px;font-weight:800;color:var(--accent)}
  .rank-cps{font-size:16px;color:#fff}
  .rank-quote{color:var(--muted);margin-top:10px}
  .try-btn{margin-top:14px;padding:10px 14px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent),#ffd19a);cursor:pointer;font-weight:800}
  .history-list{max-height:140px;overflow:auto;padding:6px}
  .history-item{display:flex;justify-content:space-between;padding:6px;border-radius:8px;margin-bottom:6px;background:rgba(255,255,255,0.01)}
  .heatmap{height:120px;border-radius:8px;background:linear-gradient(180deg,#071220,#05101a);display:flex;align-items:center;justify-content:center;color:var(--muted);position:relative;}
  .leaderboard{max-height:220px;overflow:auto}
  .lb-row{display:flex;justify-content:space-between;padding:8px;border-radius:8px;margin-bottom:8px;background:rgba(255,255,255,0.01)}
  footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
  @media (max-width:980px){.grid{grid-template-columns:1fr}.result-popup{position:fixed;width:86%;}}
</style>
</head>
<body>
<div class="container">
<header>
  <div>
    <h1>Super CPS Tester</h1>
    <div class="subtitle">Modes: 1s / 2s / 5s / 10s / 1min ‚Äî Mouse / Touch only ‚Äî Animated rank popup</div>
  </div>
  <div class="subtitle">Tip: Use mouse or tap; keyboard clicks are disabled</div>
</header>

<div class="card">
  <div class="modes" role="tablist" aria-label="timer modes">
    <button class="mode-btn" data-s="1">1s</button>
    <button class="mode-btn" data-s="2">2s</button>
    <button class="mode-btn active" data-s="5">5s</button>
    <button class="mode-btn" data-s="10">10s</button>
    <button class="mode-btn" data-s="60">1min</button>
  </div>

  <div class="grid">
    <div class="click-area" id="clickArea">
      <div class="big-target" id="bigTarget">Click to start ‚Äî 5s</div>

      <div class="stat-row">
        <div class="stat"><div class="num" id="liveClicks">0</div><div class="label">Clicks</div></div>
        <div class="stat"><div class="num" id="liveCps">0.00</div><div class="label">CPS (live)</div></div>
        <div class="stat"><div class="num" id="timeLeft">5s</div><div class="label">Time left</div></div>
      </div>

      <div class="result-popup" id="resultPopup" role="dialog" aria-modal="true">
        <div class="result-rank">
          <div class="rank-icon" id="rankIcon">üêÜ</div>
          <div class="rank-info">
            <div class="rank-name" id="rankName">Cheetah</div>
            <div class="rank-cps" id="rankCps">12.34 CPS ‚Äî 37 clicks</div>
          </div>
        </div>
        <div class="rank-quote" id="rankQuote">Your fingers snap at blistering speed ‚Äî hail the king of clicking!</div>
        <button class="try-btn" id="tryAgain">Try Again</button>
      </div>
    </div>

    <aside class="side">
      <div class="panel">
        <h3>Controls</h3>
        <div class="controls">
          <button class="btn primary" id="restartBtn">Restart</button>
          <button class="btn ghost" id="resetBest">Reset Best</button>
        </div>
        <div style="margin-top:10px;color:var(--muted);font-size:13px">Best per mode is stored locally in your browser.</div>
      </div>

      <div class="panel">
        <h3>Session History</h3>
        <div class="history-list" id="history"></div>
      </div>

      <div class="panel">
        <h3>Heatmap</h3>
        <div class="heatmap" id="heatmap">Click heatmap (visual)</div>
      </div>

      <div class="panel">
        <h3>Local Leaderboard</h3>
        <div class="leaderboard" id="leaderboard"></div>
      </div>
    </aside>
  </div>
</div>

<footer>Built with ‚ù§Ô∏è ‚Äî click only with mouse or touch. Keyboard clicking disabled.</footer>
</div>

<script>
const modeButtons=document.querySelectorAll('.mode-btn');
const bigTarget=document.getElementById('bigTarget');
const liveClicksEl=document.getElementById('liveClicks');
const liveCpsEl=document.getElementById('liveCps');
const timeLeftEl=document.getElementById('timeLeft');
const resultPopup=document.getElementById('resultPopup');
const rankIcon=document.getElementById('rankIcon');
const rankName=document.getElementById('rankName');
const rankCps=document.getElementById('rankCps');
const rankQuote=document.getElementById('rankQuote');
const tryAgainBtn=document.getElementById('tryAgain');
const restartBtn=document.getElementById('restartBtn');
const resetBestBtn=document.getElementById('resetBest');
const historyEl=document.getElementById('history');
const leaderboardEl=document.getElementById('leaderboard');
const heatmapBox=document.getElementById('heatmap');

let modeSeconds=5,running=false,clicks=0,startTime=0,raf=null,sessionHistory=[],heatmapPoints=[];

// cool click sound
const clickSound=new Audio('https://www.soundjay.com/button/sounds/button-16.mp3');
clickSound.volume=0.4;

// disable keyboard
window.addEventListener('keydown',e=>{if(e.code==='Space'||e.key===' ') e.preventDefault();});

// modes
function setActiveMode(btn){
  modeButtons.forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  modeSeconds=Number(btn.dataset.s);
  bigTarget.textContent='Click to start ‚Äî '+(modeSeconds===60?'1m':modeSeconds+'s');
  timeLeftEl.textContent=(modeSeconds===60?'60s':modeSeconds+'s');
  loadSessionHistory();
  resetRun();
}
modeButtons.forEach(b=>b.addEventListener('click',()=>setActiveMode(b)));
(function init(){const active=document.querySelector('.mode-btn.active')||modeButtons[0];setActiveMode(active);})();

// click & ripple
bigTarget.addEventListener('pointerdown',e=>{
  registerClick(e);
  if(!running) startRun();
  clickSound.currentTime=0; clickSound.play();
  const ripple=document.createElement('div'); ripple.className='ripple';
  const rect=bigTarget.getBoundingClientRect();
  const x=(e.clientX||e.touches[0].clientX)-rect.left;
  const y=(e.clientY||e.touches[0].clientY)-rect.top;
  ripple.style.left=x+'px'; ripple.style.top=y+'px';
  bigTarget.appendChild(ripple);
  setTimeout(()=>ripple.remove(),500);
});

function startRun(){running=true; clicks=0;heatmapPoints=[];startTime=performance.now();resultPopup.classList.remove('show');bigTarget.textContent='';raf=requestAnimationFrame(updateFrame);}
function registerClick(e){
  clicks++;
  liveClicksEl.textContent=clicks;
  const rect=bigTarget.getBoundingClientRect();
  const x=((e.clientX||(e.touches&&e.touches[0].clientX))-rect.left)/rect.width;
  const y=((e.clientY||(e.touches&&e.touches[0].clientY))-rect.top)/rect.height;
  heatmapPoints.push({x:Math.max(0,Math.min(1,x)),y:Math.max(0,Math.min(1,y))});
}

function updateFrame(){
  if(!running) return;
  const elapsed=(performance.now()-startTime)/1000;
  const left=Math.max(0,modeSeconds-elapsed);
  timeLeftEl.textContent=(left<1?left.toFixed(2)+'s':Math.ceil(left)+'s');
  liveCpsEl.textContent=(clicks/Math.max(0.0001,elapsed)).toFixed(2);
  if(left<=0){running=false;showFinalResult(elapsed);return;}
  raf=requestAnimationFrame(updateFrame);
}

const ranks=[
  {max:3,name:'Turtle',icon:'üê¢',color:'#94a3b8',quote:'Slow and steady‚Ä¶ keep practicing!'},
  {max:5,name:'Rabbit',icon:'üêá',color:'#7dd3fc',quote:'Quick reflexes ‚Äî you\'re getting faster!'},
  {max:8,name:'Tiger',icon:'üêØ',color:'#fb923c',quote:'Sharp and strong ‚Äî your speed roars!'},
  {max:10,name:'Falcon',icon:'ü¶Ö',color:'#facc15',quote:'Lightning fast ‚Äî you fly through clicks!'},
  {max:15,name:'Cheetah',icon:'üêÜ',color:'#ffd166',quote:'Your fingers snap at blistering speed ‚Äî hail the king of clicking!'},
  {max:9999,name:'Lightning',icon:'‚ö°',color:'#ffd1a3',quote:'Superhuman speed ‚Äî unstoppable!'}
];
function getRankForCps(cps){for(const r of ranks)if(cps<=r.max)return r;return ranks[ranks.length-1];}

function showFinalResult(totalTime){
  const finalCps=clicks/Math.max(0.0001,totalTime);
  liveCpsEl.textContent=finalCps.toFixed(2);
  bigTarget.textContent='Result!'; // prevents text merging

  const r=getRankForCps(finalCps);
  rankIcon.textContent=r.icon; rankName.textContent=r.name; rankName.style.color=r.color;
  rankCps.textContent=`${finalCps.toFixed(2)} CPS ‚Äî ${clicks} clicks`; rankQuote.textContent=r.quote;
  resultPopup.classList.add('show');

  bigTarget.animate([{boxShadow:'0 0 0 transparent'},{boxShadow:'0 0 40px rgba(255,138,0,0.12)'}],{duration:450,fill:'forwards'});
  pushSession(finalCps,clicks,totalTime); renderLeaderboard(); renderHistory(); renderHeatmap();
}

tryAgainBtn.addEventListener('click',()=>{resultPopup.classList.remove('show');setTimeout(()=>startRun(),160);});
restartBtn.addEventListener('click',()=>{resultPopup.classList.remove('show');resetRun();startRun();});
function resetRun(){running=false;clicks=0;liveClicksEl.textContent='0';liveCpsEl.textContent='0.00';timeLeftEl.textContent=(modeSeconds===60?'60s':modeSeconds+'s');cancelAnimationFrame(raf);bigTarget.textContent='Click to start ‚Äî '+(modeSeconds===60?'1m':modeSeconds+'s');}

// session history & leaderboard
function pushSession(cps,clicks,t){
  const s={cps:Number(cps.toFixed(2)),clicks,t:Number(t.toFixed(2)),mode:modeSeconds,ts:new Date().toISOString()};
  sessionHistory.unshift(s); if(sessionHistory.length>50)sessionHistory.pop();
  const key=`cps_sessions_${modeSeconds}`; const all=JSON.parse(localStorage.getItem(key)||'[]'); all.unshift(s); if(all.length>100)all.pop(); localStorage.setItem(key,JSON.stringify(all));
  const bestKey=`cps_best_${modeSeconds}`; const prev=parseFloat(localStorage.getItem(bestKey)||'0'); if(s.cps>prev)localStorage.setItem(bestKey,s.cps.toFixed(2));
}
function loadSessionHistory(){const key=`cps_sessions_${modeSeconds}`;sessionHistory=JSON.parse(localStorage.getItem(key)||'[]');renderHistory();}
function renderHistory(){historyEl.innerHTML='';sessionHistory.slice(0,10).forEach(s=>{const div=document.createElement('div');div.className='history-item';div.textContent=`${s.clicks} clicks ‚Äî ${s.cps} CPS`;historyEl.appendChild(div);});}
function renderLeaderboard(){leaderboardEl.innerHTML='';const all=JSON.parse(localStorage.getItem(`cps_sessions_${modeSeconds}`)||'[]');all.sort((a,b)=>b.cps-a.cps);all.slice(0,10).forEach((s,i)=>{const div=document.createElement('div');div.className='lb-row';div.textContent=`#${i+1} ‚Äî ${s.cps} CPS ‚Äî ${s.clicks} clicks`;leaderboardEl.appendChild(div);});}
function renderHeatmap(){heatmapBox.innerHTML='';if(heatmapPoints.length===0){heatmapBox.textContent='Click heatmap (visual)'; return;}heatmapPoints.forEach(p=>{const dot=document.createElement('div');dot.style.position='absolute';dot.style.width='8px';dot.style.height='8px';dot.style.borderRadius='50%';dot.style.background='rgba(255,138,0,0.5)';dot.style.left=`${p.x*100}%`;dot.style.top=`${p.y*100}%`;heatmapBox.appendChild(dot);});}
resetBestBtn.addEventListener('click',()=>{localStorage.removeItem(`cps_best_${modeSeconds}`);alert('Best cleared for this mode');});
</script>
</body>
</html>
